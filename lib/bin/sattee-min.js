let Sattee={name:void 0,layers:null,main:null,currentScene:null,currentLayer:void 0,loadedScene:!1,canvasArray:[],mouseIsDragged:!1,frameRate:60,lastFrameDate:void 0,currentFrameDate:void 0,delta:void 0,exited:!1,scenes:{},assets:{},load:function(e){this.assets=e,this.preload()},configure:function({width:e,height:t,layers:n,name:r,container:o,main:i,loopFunction:a}){this.width=e,this.height=t,this.layers=n,this.main=i,this.currentScene=i,this.name=r,this.loopFunction=a;let s=document.createElement("div");this.container=s,s.setAttribute("id",r),s.style.width=`${e}px`,s.style.height=`${t}px`;for(let o=0;o<n;o++){let n=document.createElement("canvas");n.width=`${e}`,n.height=`${t}`,n.style.position="absolute",n.style.left="0px",n.style.top="0px",n.setAttribute("id",r+o),s.appendChild(n),this.canvasArray.push({x:0,y:0})}o&&"string"==typeof o?"#"==o[0]?document.getElementById(o.replace("#","")).appendChild(s):"."==o[0]&&document.getElementsByClassName(o.replace(".","")).appendChild(s):document.body.appendChild(s)},loadImage:function(e,t){let n=new Image;return n.onload=function(){t()},n.src=e,n},loadSound:function(e,t){let n=new Audio(e);return n.onload=function(){t()},n}},entityArray={};function newEntity(e){let t={position:createVector(0,0),velocity:createVector(0,0),_index:0};for(let n in e){let r=e[n];t[n]=r}if("group"in e)if(entityArray[e.group]){let n=entityArray[e.group].length+1;t._index=n,entityArray[e.group].push(t)}else entityArray[e.group]=[]}let loaded=0;function _getButtons(e){let t=[];for(let n in Sattee.keys)(Sattee.keys[n]&&!e||!Sattee.keys[n]&&e)&&t.push(String.fromCharCode(n));return t}function runEvent(e,t){Sattee.scenes[Sattee.currentScene][e]&&(t?Sattee.scenes[Sattee.currentScene][e](...t):Sattee.scenes[Sattee.currentScene][e]())}Sattee.preload=function(){let e=Object.keys(Sattee.assets).length,t=0;function n(e,t){for(let n of t)if(e.endsWith(n))return n;return!1}function r(){loaded=e/++t}for(let e in Sattee.assets){let t=Sattee.assets[e],o=!1;if(n(t,[".png",".jpg",".jpeg"]))o=Sattee.loadImage(t,r);else if(n(t,[".mp3",".wav"]))o=Sattee.loadSound(t,r);else if(!n(t,[".mp4"]))throw new Error(`Unsupported file format in the path: (${t}) of the asset: (${e})`);if(!o)throw new Error(`No such asset file (${t})`);Sattee.assets[e]=o}},Sattee.getCanvas=function(e){let t=document.getElementById(`${Sattee.name}${e||Sattee.currentLayer}`);return[t.getContext("2d"),t]},Sattee.draw=function(e,t){Sattee.validate("draw").arguments([e,t],2).type(e,"number",t,"function").range(e,0,this.layers),this.currentLayer=e,t.apply(this.scenes[this.currentScene]),this.currentLayer=void 0},Sattee.background=function(e,t,n,r){Sattee.validate("background").arguments([e,t,n],3).type(e,"number",t,"number",n,"number"),Sattee.validate();let[o,i]=this.getCanvas();i.fillStyle=`rgba(${e},${t},${n},${r&&"number"==typeof r?r:255})`;let a=Sattee.currentLayer;i.fillRect(-this.canvasArray[a].x,-this.canvasArray[a].y,o.width,o.height)},Sattee.clear=function(e,t){Sattee.validate("clear").arguments([e],1).type(e,"number").range(e,0,this.layers);let[n,r]=this.getCanvas(e),o=0,i=0;t?(Sattee.validate("clear","There was an error with the options in the Sattee.clear() function").arguments([t.x,t.y,t.width,t.height],4).type(t.x,"number",t.y,"number",t.width,"number",t.height,"number"),o=t.x,i=t.y,t.offset?n.clearRect(o-t.offset,i-t.offset,t.width+2*t.offset,t.height+2*t.offset):n.clearRect(o,i,t.width,t.height)):n.clearRect(o,i,r.width,r.height)},Sattee.rect=function(e,t,n,r,o){Sattee.validate("rect").arguments([e,t,n,r],4).type(e,"number",t,"number",n,"number",r,"number"),Sattee.validate();let[i]=this.getCanvas();if(o&&o.color&&"string"!=typeof o.color)throw new Error("The given color in the options of the rect function is invalid.");if(o&&o.color?i.fillStyle=o.color:i.fillStyle="rgba(255,255,255,255)",i.beginPath(),i.rect(e,t,n,r),o&&o.strokeSize&&"number"!=typeof o.strokeSize)throw new Error("The given strokeSize in the options of the triangle function is invalid.");if(o&&o.strokeSize){if(i.lineWidth=o.strokeSize,o&&o.strokeColor&&"string"!=typeof o.strokeColor)throw new Error("The given strokeColor in the options of the rect function is invalid.");o&&o.strokeColor&&(i.strokeStyle=o.strokeColor),i.stroke()}i.fill(),i.strokeStyle="rgba(255,255,255,0)",i.lineWidth=1},Sattee.ellipse=function(e,t,n,r,o){Sattee.validate("ellipse").arguments([e,t,n,r],4).type(e,"number",t,"number",n,"number",r,"number"),Sattee.validate();let[i]=this.getCanvas();if(o&&o.color&&"string"!=typeof o.color)throw new Error("The given color in the options of the ellipse function is invalid.");if(o&&o.color?i.fillStyle=o.color:i.fillStyle="rgba(255,255,255,255)",i.beginPath(),i.ellipse(e+n/2,t+r/2,n/2,r/2,0,90,90),o&&o.strokeSize&&"number"!=typeof o.strokeSize)throw new Error("The given strokeSize in the options of the triangle function is invalid.");if(o&&o.strokeSize){if(i.lineWidth=o.strokeSize,o&&o.strokeColor&&"string"!=typeof o.strokeColor)throw new Error("The given strokeColor in the options of the ellipse function is invalid.");o&&o.strokeColor&&(i.strokeStyle=o.strokeColor),i.stroke()}i.fill(),i.strokeStyle="rgba(255,255,255,0)",i.lineWidth=1},Sattee.triangle=function(e,t,n,r,o,i,a){Sattee.validate("triangle").arguments([e,t,n,r,o,i],6).type(e,"number",t,"number",n,"number",r,"number",o,"number",i,"number"),Sattee.validate();let[s]=Sattee.getCanvas();if(a&&a.color&&"string"!=typeof a.color)throw new Error("The given color in the options of the triangle function is invalid.");if(a&&a.color?s.fillStyle=a.color:s.fillStyle="rgba(255,255,255,255)",s.beginPath(),s.moveTo(e,t),s.lineTo(n,r),s.lineTo(o,i),s.closePath(),a&&a.strokeSize&&"number"!=typeof a.strokeSize)throw new Error("The given strokeSize in the options of the triangle function is invalid.");if(a&&a.strokeSize){if(s.lineWidth=a.strokeSize,a&&a.strokeColor&&"string"!=typeof a.strokeColor)throw new Error("The given strokeColor in the options of the triangle function is invalid.");a&&a.strokeColor&&(s.strokeStyle=a.strokeColor),s.stroke()}s.fill(),s.strokeStyle="rgba(255,255,255,0)",s.lineWidth=1},Sattee.line=function(e,t,n,r,o){Sattee.validate("line").arguments([e,t,n,r],4).type(e,"number",t,"number",n,"number",r,"number",x3,"number",y3,"number"),Sattee.validate();let[i]=this.getCanvas();if(i.fillStyle="rgba(255,255,255,255)",i.strokeStyle="rgba(255,255,255,255)",o&&o.color&&"string"!=typeof o.color)throw new Error("The given color in the options of the line function is invalid.");if(o&&o.color?i.fillStyle=o.color:i.fillStyle="rgba(255,255,255,255)",i.beginPath(),i.moveTo(e,t),i.lineTo(n,r),o&&o.strokeSize&&"number"!=typeof o.strokeSize)throw new Error("The given strokeSize in the options of the line function is invalid.");if(o&&o.strokeSize&&(i.lineWidth=o.strokeSize),o&&o.strokeColor&&"string"!=typeof o.strokeColor)throw new Error("The given strokeColor in the options of the line function is invalid.");o&&o.strokeColor&&(i.strokeStyle=o.strokeColor),i.lineCap="round",i.stroke(),i.fill(),i.strokeStyle="rgba(255,255,255,0)",i.lineWidth=1},Sattee.translate=function(e,t,n,r){Sattee.validate("translate").arguments([e,t,n,r],4).type(e,"number",t,"number",n,"number",r,"function").range(e,0,this.layers);let[o]=this.getCanvas(e);o.translate(t,n),this.canvasArray[e].translated=!0,this.canvasArray[e].x=t,this.canvasArray[e].y=n,r.apply(this.scenes[this.currentScene]),o.translate(-t,-n),this.canvasArray[e].translated=!1,this.canvasArray[e].x=-t,this.canvasArray[e].y=-n},Sattee.init=function(e,t){t.setuped=!1,this.scenes[e]=t,0==this.loadedScene&&(this.loadedScene=!0,this.switchScene(this.main)),this._loadEvents(this.container)},Sattee.switchScene=function(e,t){if(!this.scenes[e])throw new Error(`The specified scene (${e}) is missing. Check your code!`);if(this.exited)throw new Error("Trying to play a scene after Sattee.exit(); is called!");t&&(this.scenes[e].setuped=!1),this.currentScene=e;let n=this.currentScene;this.scenes[e].setuped||(this.scenes[e].setuped=!0,this.scenes[e].setup.apply(this.scenes[e]));let r=this.scenes[e].loop.bind(this.scenes[e]);!function e(){if(n==Sattee.currentScene&&!Sattee.exited){{null==Sattee.lastFrameDate&&(Sattee.lastFrameDate=new Date),Sattee.currentFrameDate=new Date,Sattee.delta=(Sattee.currentFrameDate.getTime()-Sattee.lastFrameDate.getTime())/1e3,Sattee.lastFrameDate=Sattee.currentFrameDate,r();let e=_getButtons();e.length>0&&runEvent("keyDown",[e]);let t=_getButtons(!0);if(t.length>0){runEvent("keyUp",[...t]);for(let e in Sattee.keys)0==Sattee.keys[e]&&delete Sattee.keys[e]}Sattee.mouseIsDragged&&runEvent("mouseDragged")}if("interval"==Sattee.loopFunction)setInterval(function(){e()},1e3/Sattee.frameRate);else if("timeout"==Sattee.loopFunction)setTimeout(function(){e()},1e3/Sattee.frameRate);else{if("animation"!=Sattee.loopFunction)throw new Error('You need to specify a loop function in the config. If you are not sure what to use, use timeout. (loopfunction:"timeout")');window.requestAnimationFrame(e)}}}()},Sattee.exit=function(){this.exited=!0},Sattee.keys={},onkeydown=onkeyup=function(e){let t="keydown"==e.type;9==e.keyCode&&e.preventDefault(),Sattee.keys[e.keyCode||e.which]=t};let getMPos=function(e){let t=document.getElementById(`${Sattee.name}0`).getBoundingClientRect();Sattee.prevmouseX=Sattee.mouseX||e.clientX-t.left,Sattee.prevmouseY=Sattee.mouseY||e.clientY-t.top,Sattee.mouseX=e.clientX-t.left,Sattee.mouseY=e.clientY-t.top};Sattee._loadEvents=function(e){e.addEventListener("mousemove",function(e){getMPos(e)}),e.addEventListener("click",function(){runEvent("mouseClicked")}),e.addEventListener("mouseup",function(){Sattee.mouseIsDragged=!1,runEvent("mouseReleased")}),e.addEventListener("mousedown",function(){Sattee.mouseIsDragged=!0,runEvent("mouseDown")}),e.addEventListener("keydown",onkeydown),e.addEventListener("keyup",onkeyup)},Sattee.validate=function(e){if(check={},check.msg=`There was an error in the Sattee.${e}(); function.\n`,null==this.currentLayer)throw new Error("You are not allowed to draw on the canvas outside the Sattee.draw function");return check.arguments=function(e,t,n){let r=n||"not enough or invald arguments",o=!1;for(let t=0;t<e.length;t++)if(void 0===e[t]){o=!0;break}if(e.length!=t||o)throw new Error(this.msg+r);return this},check.range=function(e,t,n,r){let o=r||"one or more of the arguments with type of number is with invalid range";if(e<t||e>n)throw new Error(this.msg+o);return this},check.type=function(e,t){let n=t||"wrong type of argument on one or more of the give arguments",r=!1;for(let t=0;t<e.length;t+=2)if(typeof e[t]!=e[t+1]){r=!0;break}if(r)throw new Error(this.msg+n);return this},check};